import{c as we,a as J,m as Pe,d as Ae,e as Fe,u as Ie,f as De,g as Re,h as _e,b as Me}from"./filter-CtIy9tI0.js";import{p as se,aW as Te,aX as ie,g as re,D as O,aY as Be,aZ as Le,o as b,u as ce,a_ as Ue,a$ as le,c as o,G as x,b0 as Ee,b1 as Ne,aB as Oe,x as E,s as R,b2 as Ke,b3 as ze,z as N,ag as ae,W as K,b4 as We,as as te,b5 as $e,r as He,a6 as Ze,b6 as qe,b7 as Ge,b8 as ue,Z as ne,b9 as Xe,aA as Ye}from"./index-CWikNf2Y.js";import{V as je,b as oe}from"./VMenu-CByEKNdx.js";const Je=se({...Te(),...ie(we(),["inline"])},"VCheckbox"),ul=re()({name:"VCheckbox",inheritAttrs:!1,props:Je(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,g){let{attrs:a,slots:w}=g;const m=O(e,"modelValue"),{isFocused:V,focus:y,blur:F}=Be(e),_=Le(),M=b(()=>e.id||`checkbox-${_}`);return ce(()=>{const[I,r]=Ue(a),s=le.filterProps(e),z=J.filterProps(e);return o(le,x({class:["v-checkbox",e.class]},I,s,{modelValue:m.value,"onUpdate:modelValue":P=>m.value=P,id:M.value,focused:V.value,style:e.style}),{...w,default:P=>{let{id:T,messagesId:W,isDisabled:$,isReadonly:H,isValid:Z}=P;return o(J,x(z,{id:T.value,"aria-describedby":W.value,disabled:$.value,readonly:H.value},r,{error:Z.value===!1,modelValue:m.value,"onUpdate:modelValue":c=>m.value=c,onFocus:y,onBlur:F}),w)}})}),{}}});function Qe(e,g,a){if(g==null)return e;if(Array.isArray(g))throw new Error("Multiple matches is not implemented");return typeof g=="number"&&~g?o(K,null,[o("span",{class:"v-autocomplete__unmask"},[e.substr(0,g)]),o("span",{class:"v-autocomplete__mask"},[e.substr(g,a)]),o("span",{class:"v-autocomplete__unmask"},[e.substr(g+a)])]):e}const el=se({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Pe({filterKeys:["title"]}),...Ae(),...ie(Ee({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ne({transition:!1})},"VAutocomplete"),nl=re()({name:"VAutocomplete",props:el(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,g){let{slots:a}=g;const{t:w}=Oe(),m=E(),V=R(!1),y=R(!0),F=R(!1),_=E(),M=E(),I=O(e,"menu"),r=b({get:()=>I.value,set:l=>{var t;I.value&&!l&&((t=_.value)!=null&&t.Î¨openChildren)||(I.value=l)}}),s=R(-1),z=b(()=>{var l;return(l=m.value)==null?void 0:l.color}),P=b(()=>r.value?e.closeText:e.openText),{items:T,transformIn:W,transformOut:$}=Fe(e),{textColorClasses:H,textColorStyles:Z}=Ke(z),c=O(e,"search",""),n=O(e,"modelValue",[],l=>W(l===null?[null]:Ye(l)),l=>{const t=$(l);return e.multiple?t:t[0]??null}),ve=b(()=>typeof e.counterValue=="function"?e.counterValue(n.value):typeof e.counterValue=="number"?e.counterValue:n.value.length),A=ze(),{filteredItems:q,getMatches:de}=Ie(e,T,()=>y.value?"":c.value),k=b(()=>e.hideSelected?q.value.filter(l=>!n.value.some(t=>t.value===l.value)):q.value),B=b(()=>!!(e.chips||a.chip)),D=b(()=>B.value||!!a.selection),fe=b(()=>n.value.map(l=>l.props.value)),G=b(()=>{var t;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&c.value===((t=k.value[0])==null?void 0:t.title))&&k.value.length>0&&!y.value&&!F.value}),X=b(()=>e.hideNoData&&!k.value.length||e.readonly||(A==null?void 0:A.isReadonly.value)),Y=E(),{onListScroll:me,onListKeydown:pe}=De(Y,m);function he(l){e.openOnClear&&(r.value=!0),c.value=""}function ge(){X.value||(r.value=!0)}function Ve(l){X.value||(V.value&&(l.preventDefault(),l.stopPropagation()),r.value=!r.value)}function be(l){var u,i,p;if(e.readonly||A!=null&&A.isReadonly.value)return;const t=m.value.selectionStart,v=n.value.length;if((s.value>-1||["Enter","ArrowDown","ArrowUp"].includes(l.key))&&l.preventDefault(),["Enter","ArrowDown"].includes(l.key)&&(r.value=!0),["Escape"].includes(l.key)&&(r.value=!1),G.value&&["Enter","Tab"].includes(l.key)&&!n.value.some(d=>{let{value:f}=d;return f===k.value[0].value})&&C(k.value[0]),l.key==="ArrowDown"&&G.value&&((u=Y.value)==null||u.focus("next")),["Backspace","Delete"].includes(l.key)){if(!e.multiple&&D.value&&n.value.length>0&&!c.value)return C(n.value[0],!1);if(~s.value){const d=s.value;C(n.value[s.value],!1),s.value=d>=v-1?v-2:d}else l.key==="Backspace"&&!c.value&&(s.value=v-1)}if(e.multiple){if(l.key==="ArrowLeft"){if(s.value<0&&t>0)return;const d=s.value>-1?s.value-1:v-1;n.value[d]?s.value=d:(s.value=-1,m.value.setSelectionRange((i=c.value)==null?void 0:i.length,(p=c.value)==null?void 0:p.length))}if(l.key==="ArrowRight"){if(s.value<0)return;const d=s.value+1;n.value[d]?s.value=d:(s.value=-1,m.value.setSelectionRange(0,0))}}}function ye(l){if(ue(m.value,":autofill")||ue(m.value,":-webkit-autofill")){const t=T.value.find(v=>v.title===l.target.value);t&&C(t)}}function ke(){var l;V.value&&(y.value=!0,(l=m.value)==null||l.focus())}function xe(l){V.value=!0,setTimeout(()=>{F.value=!0})}function Ce(l){F.value=!1}function Se(l){(l==null||l===""&&!e.multiple&&!D.value)&&(n.value=[])}const j=R(!1);function C(l){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!l||l.props.disabled))if(e.multiple){const v=n.value.findIndex(i=>e.valueComparator(i.value,l.value)),u=t??!~v;if(~v){const i=u?[...n.value,l]:[...n.value];i.splice(v,1),n.value=i}else u&&(n.value=[...n.value,l]);e.clearOnSelect&&(c.value="")}else{const v=t!==!1;n.value=v?[l]:[],c.value=v&&!D.value?l.title:"",ne(()=>{r.value=!1,y.value=!0})}}return N(V,(l,t)=>{var v;l!==t&&(l?(j.value=!0,c.value=e.multiple||D.value?"":String(((v=n.value.at(-1))==null?void 0:v.props.title)??""),y.value=!0,ne(()=>j.value=!1)):(!e.multiple&&c.value==null&&(n.value=[]),r.value=!1,n.value.some(u=>{let{title:i}=u;return i===c.value})||(c.value=""),s.value=-1))}),N(c,l=>{!V.value||j.value||(l&&(r.value=!0),y.value=!l)}),N(r,()=>{if(!e.hideSelected&&r.value&&n.value.length){const l=k.value.findIndex(t=>n.value.some(v=>t.value===v.value));Xe&&window.requestAnimationFrame(()=>{var t;l>=0&&((t=M.value)==null||t.scrollToIndex(l))})}}),N(()=>e.items,(l,t)=>{r.value||V.value&&!t.length&&l.length&&(r.value=!0)}),ce(()=>{const l=!!(!e.hideNoData||k.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),t=n.value.length>0,v=ae.filterProps(e);return o(ae,x({ref:m},v,{modelValue:c.value,"onUpdate:modelValue":[u=>c.value=u,Se],focused:V.value,"onUpdate:focused":u=>V.value=u,validationValue:n.externalValue,counterValue:ve.value,dirty:t,onChange:ye,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":r.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!D.value,"v-autocomplete--selecting-index":s.value>-1},e.class],style:e.style,readonly:e.readonly,placeholder:t?void 0:e.placeholder,"onClick:clear":he,"onMousedown:control":ge,onKeydown:be}),{...a,default:()=>o(K,null,[o(je,x({ref:_,modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,activator:"parent",contentClass:"v-autocomplete__content",disabled:X.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:ke},e.menuProps),{default:()=>[l&&o(Re,x({ref:Y,selected:fe.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:pe,onFocusin:xe,onFocusout:Ce,onScrollPassive:me,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var u,i,p;return[(u=a["prepend-item"])==null?void 0:u.call(a),!k.value.length&&!e.hideNoData&&(((i=a["no-data"])==null?void 0:i.call(a))??o(oe,{title:w(e.noDataText)},null)),o(_e,{ref:M,renderless:!0,items:k.value},{default:d=>{var ee;let{item:f,index:S,itemRef:h}=d;const Q=x(f.props,{ref:h,key:S,active:G.value&&S===0?!0:void 0,onClick:()=>C(f,null)});return((ee=a.item)==null?void 0:ee.call(a,{item:f,index:S,props:Q}))??o(oe,x(Q,{role:"option"}),{prepend:L=>{let{isSelected:U}=L;return o(K,null,[e.multiple&&!e.hideSelected?o(J,{key:f.value,modelValue:U,ripple:!1,tabindex:"-1"},null):void 0,f.props.prependAvatar&&o(We,{image:f.props.prependAvatar},null),f.props.prependIcon&&o(te,{icon:f.props.prependIcon},null)])},title:()=>{var L,U;return y.value?f.title:Qe(f.title,(L=de(f))==null?void 0:L.title,((U=c.value)==null?void 0:U.length)??0)}})}}),(p=a["append-item"])==null?void 0:p.call(a)]}})]}),n.value.map((u,i)=>{function p(h){h.stopPropagation(),h.preventDefault(),C(u,!1)}const d={"onClick:close":p,onKeydown(h){h.key!=="Enter"&&h.key!==" "||(h.preventDefault(),h.stopPropagation(),p(h))},onMousedown(h){h.preventDefault(),h.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},f=B.value?!!a.chip:!!a.selection,S=f?$e(B.value?a.chip({item:u,index:i,props:d}):a.selection({item:u,index:i})):void 0;if(!(f&&!S))return o("div",{key:u.value,class:["v-autocomplete__selection",i===s.value&&["v-autocomplete__selection--selected",H.value]],style:i===s.value?Z.value:{}},[B.value?a.chip?o(He,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>[S]}):o(Me,x({key:"chip",closable:e.closableChips,size:"small",text:u.title,disabled:u.props.disabled},d),null):S??o("span",{class:"v-autocomplete__selection-text"},[u.title,e.multiple&&i<n.value.length-1&&o("span",{class:"v-autocomplete__selection-comma"},[Ze(",")])])])})]),"append-inner":function(){var d;for(var u=arguments.length,i=new Array(u),p=0;p<u;p++)i[p]=arguments[p];return o(K,null,[(d=a["append-inner"])==null?void 0:d.call(a,...i),e.menuIcon?o(te,{class:"v-autocomplete__menu-icon",icon:e.menuIcon,onMousedown:Ve,onClick:qe,"aria-label":w(P.value),title:w(P.value),tabindex:"-1"},null):void 0])}})}),Ge({isFocused:V,isPristine:y,menu:r,search:c,filteredItems:q,select:C},m)}});export{nl as V,ul as a};
